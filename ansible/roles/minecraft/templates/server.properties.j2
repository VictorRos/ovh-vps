# Minecraft server properties
# Generated by Ansible - Do not edit manually
# This file will be regenerated on each playbook run
# Based on official Minecraft Wiki documentation for version 1.21.9+

# ============================================================================
# SERVER NETWORK SETTINGS
# ============================================================================
server-port={{ minecraft_port }}
{% if minecraft_server_ip | default('') != '' %}
server-ip={{ minecraft_server_ip }}
{% else %}
server-ip=
{% endif %}
motd={{ minecraft_server_motd }}
max-players={{ minecraft_max_players }}

# ============================================================================
# WORLD SETTINGS
# ============================================================================
level-name=worlds/{{ minecraft_level_name | default('world') }}
{% if minecraft_world_seed | default('') != '' %}
level-seed={{ minecraft_world_seed }}
{% else %}
level-seed=
{% endif %}
level-type={{ minecraft_level_type | default('minecraft:normal') }}
generate-structures={{ minecraft_generate_structures | lower }}
{% if minecraft_generator_settings | default('') != '' %}
generator-settings={{ minecraft_generator_settings }}
{% else %}
generator-settings={}
{% endif %}
max-world-size={{ minecraft_max_world_size }}

# ============================================================================
# GAME SETTINGS
# ============================================================================
gamemode={{ minecraft_gamemode }}
force-gamemode={{ minecraft_force_gamemode | lower }}
difficulty={{ minecraft_difficulty }}
hardcore={{ minecraft_hardcore | lower }}

# ============================================================================
# PERFORMANCE SETTINGS
# ============================================================================
view-distance={{ minecraft_view_distance }}
simulation-distance={{ minecraft_simulation_distance }}
max-tick-time={{ minecraft_max_tick_time }}
max-chained-neighbor-updates={{ minecraft_max_chained_neighbor_updates }}
network-compression-threshold={{ minecraft_network_compression_threshold }}
rate-limit={{ minecraft_rate_limit }}
entity-broadcast-range-percentage={{ minecraft_entity_broadcast_range_percentage | default(100) }}
sync-chunk-writes={{ minecraft_sync_chunk_writes | default(true) | lower }}
use-native-transport={{ minecraft_use_native_transport | default(true) | lower }}
region-file-compression={{ minecraft_region_file_compression | default('deflate') }}

# ============================================================================
# SECURITY & AUTHENTICATION
# ============================================================================
online-mode={{ minecraft_online_mode | lower }}
enforce-secure-profile={{ minecraft_enforce_secure_profile | lower }}
prevent-proxy-connections={{ minecraft_prevent_proxy_connections | default(false) | lower }}

# ============================================================================
# WHITELIST & PLAYER MANAGEMENT
# ============================================================================
white-list={{ minecraft_whitelist_enabled | lower }}
enforce-whitelist={{ minecraft_enforce_whitelist | lower }}
player-idle-timeout={{ minecraft_player_idle_timeout | default(0) }}
pause-when-empty-seconds={{ minecraft_pause_when_empty_seconds | default(60) }}
hide-online-players={{ minecraft_hide_online_players | default(false) | lower }}

# ============================================================================
# OPERATOR & PERMISSIONS
# ============================================================================
op-permission-level={{ minecraft_op_permission_level | default(4) }}
function-permission-level={{ minecraft_function_permission_level | default(2) }}
broadcast-console-to-ops={{ minecraft_broadcast_console_to_ops | lower }}
broadcast-rcon-to-ops={{ minecraft_broadcast_rcon_to_ops | lower }}

# ============================================================================
# RCON (Remote Console)
# ============================================================================
enable-rcon={{ minecraft_enable_rcon | lower }}
rcon.port={{ minecraft_rcon_port }}
{% if minecraft_enable_rcon | default(false) %}
{% if minecraft_rcon_password | default('') != '' %}
rcon.password={{ minecraft_rcon_password }}
{% else %}
{# RCON activé mais mot de passe non défini - RCON sera désactivé par le serveur #}
rcon.password=
{% endif %}
{% else %}
rcon.password=
{% endif %}

# ============================================================================
# QUERY
# ============================================================================
enable-query={{ minecraft_enable_query | lower }}
query.port={{ minecraft_query_port }}

# ============================================================================
# SERVER STATUS & VISIBILITY
# ============================================================================
enable-status={{ minecraft_enable_status | default(true) | lower }}
status-heartbeat-interval={{ minecraft_status_heartbeat_interval | default(0) }}

# ============================================================================
# RESOURCE PACKS
# ============================================================================
require-resource-pack={{ minecraft_require_resource_pack | default(false) | lower }}
{% if minecraft_resource_pack | default('') != '' %}
resource-pack={{ minecraft_resource_pack }}
{% else %}
resource-pack=
{% endif %}
{% if minecraft_resource_pack_id | default('') != '' %}
resource-pack-id={{ minecraft_resource_pack_id }}
{% else %}
resource-pack-id=
{% endif %}
{% if minecraft_resource_pack_prompt | default('') != '' %}
resource-pack-prompt={{ minecraft_resource_pack_prompt }}
{% else %}
resource-pack-prompt=
{% endif %}
{% if minecraft_resource_pack_sha1 | default('') != '' %}
resource-pack-sha1={{ minecraft_resource_pack_sha1 }}
{% else %}
resource-pack-sha1=
{% endif %}

# ============================================================================
# DATAPACKS
# ============================================================================
{% if minecraft_initial_enabled_packs | default('') != '' %}
initial-enabled-packs={{ minecraft_initial_enabled_packs }}
{% else %}
initial-enabled-packs=vanilla
{% endif %}
{% if minecraft_initial_disabled_packs | default('') != '' %}
initial-disabled-packs={{ minecraft_initial_disabled_packs }}
{% else %}
initial-disabled-packs=
{% endif %}

# ============================================================================
# ADVANCED SETTINGS
# ============================================================================
accepts-transfers={{ minecraft_accepts_transfers | default(false) | lower }}
allow-flight={{ minecraft_allow_flight | default(false) | lower }}
spawn-protection={{ minecraft_spawn_protection | default(16) }}
log-ips={{ minecraft_log_ips | default(true) | lower }}
enable-code-of-conduct={{ minecraft_enable_code_of_conduct | default(false) | lower }}
enable-jmx-monitoring={{ minecraft_enable_jmx_monitoring | default(false) | lower }}
{% if minecraft_bug_report_link | default('') != '' %}
bug-report-link={{ minecraft_bug_report_link }}
{% else %}
bug-report-link=
{% endif %}
{% if minecraft_text_filtering_config | default('') != '' %}
text-filtering-config={{ minecraft_text_filtering_config }}
{% else %}
text-filtering-config=
{% endif %}
text-filtering-version={{ minecraft_text_filtering_version | default(0) }}

# ============================================================================
# MANAGEMENT SERVER (Minecraft Server Management Protocol)
# ============================================================================
management-server-enabled={{ minecraft_management_server_enabled | default(false) | lower }}
management-server-host={{ minecraft_management_server_host | default('localhost') }}
management-server-port={{ minecraft_management_server_port | default(0) }}
{% if minecraft_management_server_secret | default('') != '' %}
management-server-secret={{ minecraft_management_server_secret }}
{% else %}
management-server-secret=
{% endif %}
management-server-tls-enabled={{ minecraft_management_server_tls_enabled | default(true) | lower }}
{% if minecraft_management_server_tls_keystore | default('') != '' %}
management-server-tls-keystore={{ minecraft_management_server_tls_keystore }}
{% else %}
management-server-tls-keystore=
{% endif %}
{% if minecraft_management_server_tls_keystore_password | default('') != '' %}
management-server-tls-keystore-password={{ minecraft_management_server_tls_keystore_password }}
{% else %}
management-server-tls-keystore-password=
{% endif %}
